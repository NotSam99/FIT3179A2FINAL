<!DOCTYPE html>
<html>
<head>
  <title>Malaysia Population Analysis</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
    
    .page-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    .main-title {
      font-family: 'Times New Roman', Times, serif;
      font-size: 42px;
      font-weight: 700;
      color: #1a1a1a;
      text-align: center;
      margin: 40px 0;
    }
    .main-subtitle {
      font-family: 'Times New Roman', Times, serif;
      font-size: 20px;
      color: #666;
      text-align: center;
      margin-bottom: 60px;
      font-weight: 400;
    }
    .row {
      display: flex;
      align-items: flex-start;
      margin-bottom: 40px;
      gap: 30px;
      flex-wrap: wrap;
      justify-content: center;
    }
    @media (max-width: 1200px) {
      .chart-container, .text-container {
        flex: 0 1 100%;
      }
      .text-container {
        max-width: 800px;
      }
    }
    .chart-container {
      flex: 2;
      background: white;
      padding: 25px;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 800px;
    }
    .text-container {
      flex: 1;
      padding: 20px;
      width: 100%;
      max-width: 400px;
      display: flex;
      align-items: center;
    }
    .chart-description {
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      line-height: 1.7;
      color: "black";
      font-weight: 400;
    }
    body {
      background-color: #f0f7f7;
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body>
  <div class="page-container">
    <h1 class="main-title">Malaysia's Population Demographics</h1>
    <p class="main-subtitle">A comprehensive analysis of population distribution, trends, and composition from 2016 to 2025</p>
    <div class="row">
      <div class="chart-container">
        <div id="map"></div>
      </div>
      <div class="text-container">
        <p class="chart-description">
          The region with the highest population density is Kuala Lumpur, the capital city of Malaysia.
          The state with the lowest population density is Sarawak, the biggest state in Malaysia by land area.
          The state with the highest population is Penang, with a population of over 1.8 million people.
        </p>
      </div>
    </div>

    <div class="row">
      <div class="chart-container">
        <div id="line-chart"></div>
      </div>
      <div class="text-container">
        <p class="chart-description">
          For the past decade, Malaysia has experienced steady population growth.
          However, there was a decline in population from 2019 to 2020, likely due to the Covid-19 pandemic.
        </p> 
      </div>
    </div>

    <div class="row">
      <div class="chart-container">
        <div id="lollipop-chart"></div>
      </div>
      <div class="text-container">
        <p class="chart-description">
          The population shows a steady increase from the youngest age group (0–4) up to the 20–24 age group, which marks the peak. 
          After this point, the population begins to decline gradually with each successive age group, indicating a youthful demographic structure with fewer individuals in older age brackets.
        </p>
      </div>
    </div>

    <div class="row">
      <div class="chart-container">
        <div id="donut-chart"></div>
      </div>
      <div class="text-container">
        <p class="chart-description">
          Malay population is the largest ethnic group in Malaysia, making up over half of the total population.
          The Chinese and other Bumiputera (Indigenous) groups also constitute significant portions of the minority.
        </p>
      </div>
    </div>

    <div class="row">
      <div class="chart-container">
        <div id="stacked-chart"></div>
      </div>
      <div class="text-container">
        <p class="chart-description">
          The gender distribution in Malaysia shows a relatively balanced ratio between males and females over the past decade.
          This visualization reveals the total population composition by gender from 2016 to 2025, highlighting the consistent growth
          in both male and female populations while maintaining a near-equal distribution.
        </p>
      </div>
    </div>

    <div class="row">
      <div class="chart-container">
        <div id="butterfly-chart"></div>
      </div>
      <div class="text-container">
        <p class="chart-description">
          The population pyramid shows the age distribution of citizens and non-citizens in Malaysia for 2025.
          Non-citizens (shown on the right) are concentrated in the working-age groups, particularly between 20-34 years old,
          while citizens (shown on the left) have a more balanced distribution across age groups. This reflects Malaysia's
          foreign worker demographics and immigration patterns.
        </p>
      </div>
    </div>
  </div>
  
  <script type="text/javascript">
    vegaEmbed('#map', 'statepopulationmap.vg.json', {mode: "vega-lite"})
      .then(console.log)
      .catch(console.warn);
    vegaEmbed('#line-chart', 'past_10_msy_line.vg.json', {mode: "vega-lite"})
      .then(console.log)
      .catch(console.warn);
    vegaEmbed('#lollipop-chart', 'age_2025_lollipop.vg.json', {mode: "vega-lite"})
      .then(console.log)
      .catch(console.warn);
    vegaEmbed('#donut-chart', 'ethnic_past_10.vg.json', {mode: "vega-lite"})
      .then(console.log)
      .catch(console.warn);
    vegaEmbed('#stacked-chart', 'sex_2025_stack.vg.json', {mode: "vega-lite"})
      .then(console.log)
      .catch(console.warn);
    vegaEmbed('#butterfly-chart', 'foreign_age_butterfly.vg.json', {mode: "vega-lite"})
      .then(console.log)
      .catch(console.warn);
  </script>
</body>
</html>